
Below is a single clear view of what each policy is responsible for in your two-region S3 replication with KMS setup.

Assume:
	•	Source bucket: bucket-eu-west-1
	•	Destination bucket: bucket-eu-central-1
	•	Replication role: S3ReplicationRole
	•	KMS keys in both regions
	•	You enforce aws:SourceVpce in bucket policies

⸻

1️⃣ S3 Bucket Policies (Both Regions)

Region	Policy Lives On	Principal (WHO)	Action (WHAT)	Resource (ON WHAT)	Purpose
eu-west-1 (source)	bucket-eu-west-1	* (everyone)	s3:*	bucket-eu-west-1 and /*	Deny all access unless via VPCE
eu-west-1 (source)	bucket-eu-west-1	S3ReplicationRole	s3:GetObjectVersion*	bucket-eu-west-1/*	Allow S3 replication to read objects
eu-central-1 (dest)	bucket-eu-central-1	* (everyone)	s3:*	bucket-eu-central-1 and /*	Deny all access unless via VPCE
eu-central-1 (dest)	bucket-eu-central-1	S3ReplicationRole	s3:Replicate*	bucket-eu-central-1/*	Allow S3 replication to write objects

Key idea:
Your Deny with aws:SourceVpce must have an exception for S3ReplicationRole, because replication does not use your VPCE.

⸻

2️⃣ S3 Replication IAM Role (S3ReplicationRole)

Policy Element	Value	Meaning
Principal (Trust Policy)	s3.amazonaws.com	Allows S3 service to assume this role
Actions	s3:GetObjectVersion* on source	Read versioned objects
Actions	s3:ReplicateObject, s3:ReplicateDelete, s3:ReplicateTags on destination	Write replicas
Resources	Source bucket ARNs	Read permission
Resources	Destination bucket ARNs	Write permission

This role is what S3 “becomes” when it performs replication.

⸻

3️⃣ KMS Key Policies (Both Regions)

Region	Policy Lives On	Principal (WHO)	Action (WHAT)	Resource (ON WHAT)	Purpose
eu-west-1	KMS key for source bucket	S3ReplicationRole	kms:Decrypt	This KMS key	Allow reading encrypted objects
eu-west-1	KMS key for source bucket	s3.amazonaws.com	kms:GenerateDataKey*	This KMS key	Allow S3 to handle crypto
eu-central-1	KMS key for dest bucket	S3ReplicationRole	kms:Encrypt, kms:ReEncrypt*	This KMS key	Allow writing encrypted replicas
eu-central-1	KMS key for dest bucket	s3.amazonaws.com	kms:Encrypt, kms:GenerateDataKey*	This KMS key	Allow S3 service to encrypt

Without these KMS permissions, replication of SSE-KMS objects always fails, even if S3 and IAM policies are correct.

⸻

One-line mental model
	•	Bucket policy controls who may touch the bucket
	•	Replication role defines what S3 is allowed to do
	•	KMS policy controls who may encrypt/decrypt objects

All three must align for replication to succeed across regions.



Below is a single clear view of what each policy is responsible for in your two-region S3 replication with KMS setup.

Assume:
	•	Source bucket: bucket-eu-west-1
	•	Destination bucket: bucket-eu-central-1
	•	Replication role: S3ReplicationRole
	•	KMS keys in both regions
	•	You enforce aws:SourceVpce in bucket policies

⸻

1️⃣ S3 Bucket Policies (Both Regions)

Region	Policy Lives On	Principal (WHO)	Action (WHAT)	Resource (ON WHAT)	Purpose
eu-west-1 (source)	bucket-eu-west-1	* (everyone)	s3:*	bucket-eu-west-1 and /*	Deny all access unless via VPCE
eu-west-1 (source)	bucket-eu-west-1	S3ReplicationRole	s3:GetObjectVersion*	bucket-eu-west-1/*	Allow S3 replication to read objects
eu-central-1 (dest)	bucket-eu-central-1	* (everyone)	s3:*	bucket-eu-central-1 and /*	Deny all access unless via VPCE
eu-central-1 (dest)	bucket-eu-central-1	S3ReplicationRole	s3:Replicate*	bucket-eu-central-1/*	Allow S3 replication to write objects

Key idea:
Your Deny with aws:SourceVpce must have an exception for S3ReplicationRole, because replication does not use your VPCE.

⸻

2️⃣ S3 Replication IAM Role (S3ReplicationRole)

Policy Element	Value	Meaning
Principal (Trust Policy)	s3.amazonaws.com	Allows S3 service to assume this role
Actions	s3:GetObjectVersion* on source	Read versioned objects
Actions	s3:ReplicateObject, s3:ReplicateDelete, s3:ReplicateTags on destination	Write replicas
Resources	Source bucket ARNs	Read permission
Resources	Destination bucket ARNs	Write permission

This role is what S3 “becomes” when it performs replication.

⸻

3️⃣ KMS Key Policies (Both Regions)

Region	Policy Lives On	Principal (WHO)	Action (WHAT)	Resource (ON WHAT)	Purpose
eu-west-1	KMS key for source bucket	S3ReplicationRole	kms:Decrypt	This KMS key	Allow reading encrypted objects
eu-west-1	KMS key for source bucket	s3.amazonaws.com	kms:GenerateDataKey*	This KMS key	Allow S3 to handle crypto
eu-central-1	KMS key for dest bucket	S3ReplicationRole	kms:Encrypt, kms:ReEncrypt*	This KMS key	Allow writing encrypted replicas
eu-central-1	KMS key for dest bucket	s3.amazonaws.com	kms:Encrypt, kms:GenerateDataKey*	This KMS key	Allow S3 service to encrypt

Without these KMS permissions, replication of SSE-KMS objects always fails, even if S3 and IAM policies are correct.

⸻

One-line mental model
	•	Bucket policy controls who may touch the bucket
	•	Replication role defines what S3 is allowed to do
	•	KMS policy controls who may encrypt/decrypt objects

All three must align for replication to succeed across regions.